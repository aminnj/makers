<!DOCTYPE HTML>
<html>
  <head>
    <link rel="stylesheet" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script type="text/javascript" src="http://livejs.com/live.js"></script>
    <script type="text/javascript" src="main.js"></script>
  </head>
  <body>
    <div id="canvases"> </div>
    <script>


      function init() {
        for(var i = 0; i < meters.length; i++) {
          var canv = $("<canvas />", { id: 'canvas'+i}).attr({'width':400,'height':300});
          fontSize = 16;

          var canvas = canv.get(0);
          canv.css('border', 'solid 1px red');
          $('body').append(canv); 
          drawGraph(canvas, meters[i]);
          canvas.addEventListener("mousedown", handleMouse, false);
          canvs.push(canv);
        }
      }



      var meters = [
        {
          "min": 0.0, "max": 0.0, "pointer": 0.3, "slices": [ 
          { "fraction": 0.2, "color": "#f3f303", "label": "yellow" },
          { "fraction": 0.3, "color": "#7372a1", "label": "purple" },
          { "fraction": 0.1, "color": "#f98000", "label": "orange" },
          { "fraction": 0.4, "color": "#02aab0", "label": "blue" },
          ]
        },
        {
          "min": 0.0, "max": 0.0, "pointer": 0.4, "slices": [ 
          { "fraction": 0.2, "color": "#00af00", "label": "very good" },
          { "fraction": 0.2, "color": "#80d600", "label": "moderately good" },
          { "fraction": 0.2, "color": "#fff000", "label": "neutral" },
          { "fraction": 0.2, "color": "#f98000", "label": "bad" },
          { "fraction": 0.2, "color": "#e60000", "label": "very very bad" },
          ]
        },
        {
          "min": 0.0, "max": 0.0, "pointer": 0.9, "slices": [ 
          { "fraction": 0.8, "color": "#f00000", "label": "bad" },
          { "fraction": 0.2, "color": "#00f000", "label": "good" },
          ]
        }
      ];

      console.log("reloaded");

      var canvs = [];
      $(function() {
        init();
      });


    </script>

    <div id="messages" align="center"> </div>
  </body>
</html>      
